<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>setTimeout Example</title>
	<style type="text/css">
		body{
				font-family: Verdana;
			}
		div{
			width: 40px;
			height: 10px;
			background-color: firebrick;
			border: 1px solid white;
			float: left;
		}	

		button{
			position: absolute;
			top: 20px;
			left: 20px;
		}

		.stop{
			left: 100px;
		}

	</style>
</head>
<body>
<button class="start">Start</button>
<button class="stop">Stop</button>

<!-- best practice put scripts at the bottom -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<!-- any plugins/extensions on jQuery go here-->

<script type="text/javascript">
	'use strict';
	let brickTimer;	//saving space for this variable
	let isAnimating = false; 
	let numBricks = 0;

	function generateBricks(){
		numBricks++;
		$('<div>').appendTo('body').attr('id', numBricks);
		//setTimeout runs only once;
		brickTimer = setTimeout(generateBricks, 1000/30); //forces 30FPS on browser
	}

	$('.start').click( function(){
		if( isAnimating == false ){
			//also could be isAnimating != true OR !isAnimating
		generateBricks();
		isAnimating = true;			
		}
	})

	$('.stop').click( function(){
		//clear my brickTimer stop it from running again.
		clearTimeout(brickTimer);
		isAnimating = false;

	})


</script>
</body>
</html>